---
export const prerender = false;
import Layout from "@/layouts/Layout.astro";
---

<Layout title="Cerrando Sesión">
    <div class="logout-container">
        <div class="logout-card">
            
            {/* Título de Despedida */}
            <h1 class="text-4xl font-bold text-white mb-4">
                ¡Hasta Pronto!
            </h1>

            {/* Mensaje de Proceso */}
            <p class="text-gray-300 mb-8">
                Cerrando tu sesión de forma segura...
            </p>

            {/* Loader*/}
            <div class="loader-container">
                <div class="loader-circle loader-blue"></div>
                <div class="loader-circle loader-orange"></div>
            </div>

            {/* URL de Redirección (Opcional para debug) */}
            <p class="text-gray-500 text-xs mt-10">
                Redirigiendo a la página de inicio...
            </p>

        </div>
    </div>

    <script is:inline>
        // Redirección inmediata al endpoint server que hace signOut y limpia cookies
        setTimeout(() => {
            window.location.href = "/api/auth/signout";
        }, 50); // Usamos un pequeño retraso (ej: 50ms) para dar tiempo a renderizar la animación
    </script>

    <noscript>
        <meta http-equiv="refresh" content="0; url=/api/auth/signout" />
    </noscript>
</Layout>

<style>
    /* Estilos globales */
    :global(body) {
        margin: 0;
        padding: 0;
        /* Fondo principal en negro */
        background-color: #000000; 
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        overflow: hidden;
    }

    /* Ocultar elementos estructurales innecesarios en esta pantalla */
    :global(nav), :global(aside) {
        display: none !important;
    }

    /* Contenedor y tarjeta */
    .logout-container {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        text-align: center;
    }

    .logout-card {
        background-color: rgba(17, 24, 39, 0.95); /* Negro/Gris Oscuro con transparencia */
        backdrop-filter: blur(5px);
        border-radius: 1rem;
        padding: 4rem 2rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
        border: 2px solid rgba(59, 130, 246, 0.5); /* Borde Azul (blue) */
        animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Loaders */
    .loader-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        height: 50px;
    }

    .loader-circle {
        width: 15px;
        height: 15px;
        border-radius: 50%;
        animation: bounce 1.2s infinite ease-in-out both;
    }

    /* Colores primarios de tu paleta */
    .loader-blue {
        background-color: #3B82F6; /* Azul */
        animation-delay: -0.32s;
    }

    .loader-orange {
        background-color: #F97316; /* Naranja */
        animation-delay: -0.16s;
    }
    
    @keyframes bounce {
        0%, 80%, 100% { 
            transform: scale(0);
        }
        40% { 
            transform: scale(1.0);
        }
    }
</style>