---
// Tipado de la estructura de una fila de la tabla
type SchoolRow = {
    nombre: string;
    region: string;
    comuna: string;
    ciudad: string;
    id: string | number; // Añadimos un ID para usarlo en la clave (key)
};

// Tipado de las propiedades del componente
type Props = {
    // La lista de filas se pasa desde la página que llama al componente
    rows: SchoolRow[];
};

// Establecemos un array vacío como valor por defecto si no se pasan filas
const { rows = [] } = Astro.props as Props;
---

<div class="relative overflow-x-auto overflow-y-auto shadow-md sm:rounded-lg rounded-sm" style="max-height: 380px;">
    <table class="w-full text-sm text-left text-gray-700 dark:text-gray-300">
        <thead class="text-xs uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-300 sticky top-0 z-10">
            <tr>
                <th class="p-4">
                    <div class="flex items-center">
                        <input id="checkbox-all" type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600">
                        <label for="checkbox-all" class="sr-only">Seleccionar todo</label>
                    </div>
                </th>
                <th class="px-6 py-3">Nombre</th>
                <th class="px-6 py-3">Región</th>
                <th class="px-6 py-3">Comuna</th>
                <th class="px-6 py-3">Ciudad</th>
                <th class="px-6 py-3">Editar</th>
            </tr>
        </thead>
        <tbody>
            {rows.map((r, i) => (
            <tr 
                class="bg-white border-b border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-600"
            >
                <td class="w-4 p-4">
                    <div class="flex items-center">
                    <input id={`row-${r.id || i}`} type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600">
                    <label for={`row-${r.id || i}`} class="sr-only">Seleccionar fila {i + 1}</label>
                    </div>
                </td>
                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">{r.nombre}</th >
                <td class="px-6 py-4">{r.region}</td>
                <td class="px-6 py-4">{r.comuna}</td>
                <td class="px-6 py-4">{r.ciudad}</td>
                <td class="px-6 py-4">
                    <a href={`#edit-colegio-${r.id || i}`} class="font-medium text-blue-600 hover:underline">Editar</a>
                </td>
            </tr>
            ))}
        </tbody>
    </table>
</div>

